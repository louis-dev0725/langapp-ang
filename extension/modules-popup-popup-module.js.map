{"version":3,"sources":["./src/app/modules/popup/pages/popup/popup.component.ts","./src/app/modules/popup/pages/popup/popup.component.html","./src/app/modules/popup/popup-routing.module.ts","./src/app/modules/popup/popup.module.ts"],"names":[],"mappings":"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","file":"modules-popup-popup-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-popup',\r\n  templateUrl: 'popup.component.html',\r\n  styleUrls: ['popup.component.scss'],\r\n})\r\nexport class PopupComponent implements OnInit {\r\n  token: string;\r\n  user: any = {};\r\n  extension: any;\r\n  siteAuth = false;\r\n\r\n  constructor() {\r\n    chrome.runtime.onMessage.addListener((message) => {\r\n      if (message.type === 'siteAuth') {\r\n        this.siteAction('auth', message.data);\r\n      }\r\n      if (message.type === 'siteLogout') {\r\n        this.siteAction('logout');\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    chrome.storage.sync.get(['token'], (result) => {\r\n      if (result.hasOwnProperty('token')) {\r\n        this.token = result.token;\r\n        console.log(result);\r\n      }\r\n    });\r\n\r\n    chrome.storage.sync.get(['user'], (result) => {\r\n      if (result.hasOwnProperty('user')) {\r\n        this.user = JSON.parse(result.user);\r\n        console.log(result);\r\n      }\r\n    });\r\n  }\r\n\r\n  siteAction(action, data: any = {}) {\r\n    if (action === 'auth') {\r\n      this.user = JSON.parse(data.user);\r\n      this.token = data.token;\r\n      this.siteAuth = true;\r\n\r\n      chrome.storage.sync.set({ token: data.token }, () => {\r\n        console.log('Set token');\r\n      });\r\n      chrome.storage.sync.set({ user: data.user }, () => {\r\n        console.log('Set user');\r\n      });\r\n    }\r\n    if (action === 'logout') {\r\n      this.siteAuth = false;\r\n      chrome.storage.sync.remove(['token', 'user']);\r\n    }\r\n  }\r\n\r\n  // Принимаем данные которые нам послал contentPage.js\r\n  // chrome.extension.onMessage.addListener((request, sender, respond) => {});\r\n\r\n  // Послыаем данные в contentPage.js\r\n  // chrome.tabs.sendMessage();\r\n}\r\n","<div class=\"content\" *ngIf=\"!siteAuth\">\r\n  <h3>Для работы с плагинам и доступа к настройкам вам не обходимо авторизироваться на\r\n    <a href=\"http://localhost:4200\">сайте</a>.\r\n  </h3>\r\n</div>\r\n\r\n<div class=\"content\" *ngIf=\"siteAuth\">\r\n  <h3>Id: {{ user.id }}</h3>\r\n  <h3>Имя: {{ user.name }}</h3>\r\n  <h3>E-mail: {{ user.email }}</h3>\r\n  <button [routerLink]=\"['http://localhost:4200/settings/plugin']\" class=\"setting_button\">Настройки плагина</button>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nimport { PopupComponent } from './pages/popup/popup.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PopupComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class PopupRoutingModule {}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { PopupComponent } from './pages/popup/popup.component';\r\nimport { PopupRoutingModule } from './popup-routing.module';\r\n\r\n@NgModule({\r\n  declarations: [PopupComponent],\r\n  imports: [CommonModule, PopupRoutingModule]\r\n})\r\nexport class PopupModule {}\r\n"],"sourceRoot":"webpack:///"}